metadata_schemas:
  app:
    type: object
    required: ["team", "owner"]
    properties:
      team:
        type: string
        enum: ["platform", "backend", "frontend", "ml", "infra"]
      owner:
        type: string
        pattern: "^@[a-zA-Z0-9-]+$"
      tier:
        type: integer
        minimum: 1
        maximum: 3
      slack_channel:
        type: string
        pattern: "^#[a-zA-Z0-9-]+$"
    additionalProperties: true
  job:
    type: object
    properties:
      priority:
        type: string
        enum: ["critical", "high", "medium", "low"]
      alert_on_failure:
        type: boolean
      estimated_duration:
        type: integer
        minimum: 1
        description: "Estimated duration in minutes"
    additionalProperties: true

job_types:
  docker_build:
    registries:
      aws:
        iams:
          prd:
            role: arn:aws:iam::920373013500:role/monotonix-builder
            region: ap-northeast-1
          dev_main:
            role: arn:aws:iam::615299752259:role/monotonix-builder-main
            region: ap-northeast-1
          dev_pr:
            role: arn:aws:iam::615299752259:role/monotonix-builder-pr
            region: ap-northeast-1
        repositories:
          prd:
            type: private
            base_url: 920373013500.dkr.ecr.ap-northeast-1.amazonaws.com/monotonix
          dev_main:
            type: private
            base_url: 615299752259.dkr.ecr.ap-northeast-1.amazonaws.com/monotonix
          dev_pr:
            type: private
            base_url: 615299752259.dkr.ecr.ap-northeast-1.amazonaws.com/monotonix-pr
